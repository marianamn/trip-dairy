"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.homeController=void 0;var _slicedToArray=function(){function e(e,r){var t=[],a=!0,i=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(t.push(o.value),!r||t.length!==r);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),_jquery=require("jquery"),_jquery2=_interopRequireDefault(_jquery),_handlebars=require("handlebars"),_handlebars2=_interopRequireDefault(_handlebars),_utils=require("utils"),_templates=require("templates"),_diariesData=require("diariesData"),TRIPS_BY_PAGE=6,CHARS_TO_SHOW=90,MOST_LIKED_DIARIES=7,homeController=function(){var e=function(){function e(r,t){_classCallCheck(this,e),this.data=r,this.templates=t}return _createClass(e,[{key:"home",value:function(){var e=this,r=void 0,t=void 0,a=void 0,i=void 0;Promise.all([this.data.getAllTripsDiaries()]).then(function(n){var o=_slicedToArray(n,1),l=o[0],u=l.data;return r=_utils.UTILS.HELPER_FUNCTIONS.getMostLikedTripsDiaries(u,MOST_LIKED_DIARIES),t=_utils.UTILS.HELPER_FUNCTIONS.getRecentTripsDiaries(u,TRIPS_BY_PAGE,CHARS_TO_SHOW),a=_utils.UTILS.HELPER_FUNCTIONS.getCategories(u),i={mostLikedDieries:r,recentDieries:t,diariesByCategories:a},e.templates.get("home")}).then(function(e){var r=_handlebars2.default.compile(e);(0,_jquery2.default)("#content").html(r(i)),(0,_jquery2.default)("#btn-search").on("click",function(e){e.preventDefault();var r=(0,_jquery2.default)("#search").val();return window.location="#/search/"+r,!1}),(0,_jquery2.default)("#categories-repeat.btn-search-1").on("click",function(e){e.preventDefault();var r=(0,_jquery2.default)("#search-1").val();return window.location="#/search/"+r,!1}),(0,_jquery2.default)(".carousel-item").first().addClass("active")})}}]),e}(),r=new e(_diariesData.tripsDiariesData,_templates.templatesLoader);return{home:function(){return r.home()}}}();exports.homeController=homeController;